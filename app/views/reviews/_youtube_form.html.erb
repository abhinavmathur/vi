<script type="text/javascript" charset="utf-8">
  var _0x162b=["\x25\x32\x30","\x72\x65\x70\x6C\x61\x63\x65","\x73\x65\x61\x72\x63\x68","\x65\x78\x65\x63","\x5B\x3F\x7C\x26\x5D","\x3D","\x28\x5B\x5E\x26\x3B\x5D\x2B\x3F\x29\x28\x26\x7C\x23\x7C\x3B\x7C\x24\x29",""];function getURLParameter(_0x796ax2){return decodeURIComponent(( new RegExp(_0x162b[4]+ _0x796ax2+ _0x162b[5]+ _0x162b[6])[_0x162b[3]](location[_0x162b[2]])|| [,_0x162b[7]])[1][_0x162b[1]](/\+/g,_0x162b[0]))|| null}

</script>

<%= form_for Review.new do |f| %>

    <script>$("input[name='product_id']").val(getURLParameter('product_id'));</script>
    <input type="hidden" name="product_id" value="">


    <div class="row">
      <div class="input-field col s12">
        <%= f.text_field :title, data: { validation: 'required'}  %>
        <%= f.label :title %>
      </div>
    </div>

    <div class="row">
      <div class="input-field col s12">
        <%= f.text_area :description, class: 'materialize-textarea', data: { validation: 'required'} %>
        <%= f.label :description %>
      </div>
    </div>

    <div class="row">
      <div class="input-field col s12">
        <%= f.text_field :tags, data: { validation: 'required'} %>
        <%= f.label :tags %>
      </div>
    </div>

    <div class="row">
      <div class="input-field col s12">
        <%= f.select(:reviewgroup_id, Reviewgroup.select(current_user), include_blank: 'Select a saved group') %>
        <%= f.label 'Select Review group' %>
      </div>
    </div>

    <div class="row">
      <div class="input-field col s12">
        <%= f.text_field :youtube_url, data: { validation: 'length', validation_length: '11-11',
         :validation_error_msg => 'Must be a 11 character YouTube ID'} %>
        <%= f.label :youtube_url, 'YouTube video ID' %>
      </div>
    </div>

    <div class="row">
      <div class="input-field col s12">
        <%= f.text_field :affiliate_tag, data: { validation: 'custom',
                                                                  validation_regexp: '[a-zA-Z0-9]-20$',
        validation_error_msg: 'Should be a valid Amazon affiliate tag ending with -20'}  %>
        <%= f.label :affiliate_tag, 'Your Amazon Affiliate Tag goes here' %>
      </div>
    </div>

    <div class="row">
      <div class="input-field col s12">
        <%= f.submit 'Save Review' %>
      </div>
    </div>
<% end %>

<script type="text/javascript" charset="utf-8">
  $.validate({
    form : '#new_review'
  });
</script>