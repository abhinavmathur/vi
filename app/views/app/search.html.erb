<div class="orange row">
  <div class="white-text headliner">
    <h1 class="center">Search Results</h1>
  </div>
</div>


<div class="container">

  <ul class="collection">
  <% @all_results.each do |result| %>
  <% if result.class.to_s == 'Review' %>
  <%= link_to truncate(result.title, length: 40),  review_path(result), id: 'search_result', data: { obj: result.class.to_s, id: result.id}, class: "collection-item"%>
  <% else %>
  <%= link_to truncate(result.title, length: 40),  product_path(result), id: 'search_result', data: { obj: result.class.to_s, id: result.id}, class: "collection-item"%>
  <% end %>
  <% end %>
</ul>
</div>
<script type="text/javascript" charset="utf-8">
$('#search_result').click(function(e){
  e.preventDefault();
  $.ajax({
    type: 'POST',
    url: '/search_joy',
    data: { obj: $(this).data('obj'), query: '<%= params[:q] %>', results_count: '<%= @all_results.total_count %>', id: $(this).data('id')}
  });
})
</script>
